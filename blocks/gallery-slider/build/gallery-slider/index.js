(()=>{"use strict";var e,l={909:()=>{const e=window.wp.blocks,l=window.wp.i18n,a=window.wp.blockEditor,i=window.wp.components,s=window.wp.element,o=window.wp.data,n=window.wp.blob,t=window.React,r=window.wp.primitives,c=(0,t.createElement)(r.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,t.createElement)(r.Path,{d:"m11.3 17.2-5-5c-.1-.1-.1-.3 0-.4l2.3-2.3-1.1-1-2.3 2.3c-.7.7-.7 1.8 0 2.5l5 5H7.5v1.5h5.3v-5.2h-1.5v2.6zm7.5-6.4-5-5h2.7V4.2h-5.2v5.2h1.5V6.8l5 5c.1.1.1.3 0 .4l-2.3 2.3 1.1 1.1 2.3-2.3c.6-.7.6-1.9-.1-2.5z"})),d=(0,t.createElement)(r.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,t.createElement)(r.Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M12 5.5A2.25 2.25 0 0 0 9.878 7h4.244A2.251 2.251 0 0 0 12 5.5ZM12 4a3.751 3.751 0 0 0-3.675 3H5v1.5h1.27l.818 8.997a2.75 2.75 0 0 0 2.739 2.501h4.347a2.75 2.75 0 0 0 2.738-2.5L17.73 8.5H19V7h-3.325A3.751 3.751 0 0 0 12 4Zm4.224 4.5H7.776l.806 8.861a1.25 1.25 0 0 0 1.245 1.137h4.347a1.25 1.25 0 0 0 1.245-1.137l.805-8.861Z"})),p=(0,t.createElement)(r.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,t.createElement)(r.Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M6 5.5h12a.5.5 0 0 1 .5.5v12a.5.5 0 0 1-.5.5H6a.5.5 0 0 1-.5-.5V6a.5.5 0 0 1 .5-.5ZM4 6a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6Zm4 10h2v-1.5H8V16Zm5 0h-2v-1.5h2V16Zm1 0h2v-1.5h-2V16Z"})),u=window.ReactJSXRuntime;(0,e.registerBlockType)("nasio-block/gallery-slider",{edit:function({attributes:e,setAttributes:t,clientId:r,className:g}){const{images:w,ids:h,slidesPerView:m,spaceBetween:b,loop:v,autoplay:k,autoplayDelay:x,showDots:y,showArrows:j,draggable:S,showCaptions:f,linkTo:_,imageSizeSlug:C}=e,[N,P]=(0,s.useState)(null),[T,B]=(0,s.useState)(null),V=(0,s.useRef)(null),E=(0,s.useRef)(null),R=(0,s.useRef)(0),{imageSizes:I}=(0,o.useSelect)((e=>{const{getSettings:l}=e("core/block-editor");return{imageSizes:l().imageSizes}}),[]),M=I.map((({name:e,slug:l})=>({value:l,label:e}))),O=(0,a.useBlockProps)({className:`wp-block-nasio-block-gallery-slider ${g||""}`,style:{"--slides-per-view":m,"--space-between":`${b}px`}}),D=e=>{const l=e.map((e=>e.id)),a=e.map((e=>({url:e.url,alt:e.alt||"",id:e.id.toString(),caption:e.caption||"",link:e.link||""})));t({images:a,ids:l})};(0,s.useEffect)((()=>{const e=setTimeout((()=>{A()}),500),l=wp.data.subscribe((()=>{const e=wp.data.select("core/block-editor").getSelectedBlock();if(e&&e.clientId===r){const e=Date.now();e-R.current>1e3&&(R.current=e,setTimeout((()=>{E.current&&E.current.update()}),50))}}));return()=>{l(),clearTimeout(e),E.current&&E.current.update()}}),[m,b,v,k,x,y,j,S,w?.length]);const A=()=>{if(E.current&&(E.current.destroy(!0,!0),E.current=null),V.current&&void 0!==window.Swiper&&w.length>0){const e=V.current.querySelector(".nasio-gallery-slider");if(!e)return;const l={slidesPerView:parseInt(m),spaceBetween:parseInt(b),slidesPerGroup:parseInt(m),rewind:v,observer:!0,observeParents:!0,resizeObserver:!0,allowTouchMove:S,simulateTouch:S,keyboard:{enabled:!0,onlyInViewport:!0},preventClicks:!1,preventClicksPropagation:!1,touchStartPreventDefault:!1,touchMoveStopPropagation:!1,speed:400};parseInt(m)>1&&(l.breakpoints={480:{slidesPerView:Math.min(2,parseInt(m))},768:{slidesPerView:parseInt(m)}}),k&&(l.autoplay={delay:x,disableOnInteraction:!1,pauseOnMouseEnter:!0}),j&&(l.navigation={nextEl:e.querySelector(".swiper-button-next"),prevEl:e.querySelector(".swiper-button-prev")}),y&&(l.pagination={el:e.querySelector(".swiper-pagination"),clickable:!0});try{E.current=new window.Swiper(e,l),setTimeout((()=>{E.current&&E.current.update()}),100)}catch(e){console.error("Error initializing Swiper:",e)}}};if((0,s.useEffect)((()=>()=>{w&&w.length&&w.forEach((e=>{(0,n.isBlobURL)(e.url)&&(0,n.revokeBlobURL)(e.url)}))}),[]),0===w.length)return(0,u.jsx)("div",{...O,children:(0,u.jsx)(a.MediaPlaceholder,{icon:"format-gallery",labels:{title:(0,l.__)("Gallery Slider","nasio-blocks"),instructions:(0,l.__)("Drag images, upload new ones or select files from your library.","nasio-blocks")},onSelect:D,accept:"image/*",allowedTypes:["image"],multiple:!0,value:w})});const z=(0,u.jsx)(a.BlockControls,{children:(0,u.jsxs)(i.Toolbar,{children:[(0,u.jsx)(a.MediaUploadCheck,{children:(0,u.jsx)(a.MediaUpload,{onSelect:D,allowedTypes:["image"],multiple:!0,gallery:!0,value:h,render:({open:e})=>(0,u.jsx)(i.Button,{onClick:e,icon:c,label:(0,l.__)("Edit gallery","nasio-blocks")})})}),N&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(a.MediaUploadCheck,{children:(0,u.jsx)(a.MediaUpload,{onSelect:e=>{if(!N)return;const l=[...w],a=l.findIndex((e=>e.id===N));if(-1===a)return;const i=e[0],s={url:i.url,alt:i.alt||"",id:i.id.toString(),caption:i.caption||l[a].caption||"",link:i.link||l[a].link||""};l[a]=s;const o=[...h];o[a]=i.id,t({images:l,ids:o})},allowedTypes:["image"],value:N,render:({open:e})=>(0,u.jsx)(i.Button,{onClick:e,icon:"replace",label:(0,l.__)("Replace image","nasio-blocks")})})}),(0,u.jsx)(i.Button,{onClick:()=>(e=>{const l=w.filter((l=>l.id!==e)),a=h.filter((l=>l!==parseInt(e)));t({images:l,ids:a}),N===e&&P(null)})(N),icon:d,label:(0,l.__)("Remove image","nasio-blocks")}),f&&(0,u.jsx)(i.Button,{icon:p,label:T===N?(0,l.__)("Stop editing caption","nasio-blocks"):(0,l.__)("Edit caption","nasio-blocks"),onClick:()=>{B(T===N?null:N)},isPressed:T===N})]})]})});return(0,u.jsxs)(u.Fragment,{children:[z,(0,u.jsx)(a.InspectorControls,{children:(0,u.jsxs)(i.PanelBody,{title:(0,l.__)("Gallery Slider Settings","nasio-blocks"),children:[(0,u.jsx)(i.RangeControl,{label:(0,l.__)("Slides Per View","nasio-blocks"),value:m,onChange:e=>t({slidesPerView:e}),min:1,max:5}),(0,u.jsx)(i.RangeControl,{label:(0,l.__)("Space Between Slides (px)","nasio-blocks"),value:b,onChange:e=>t({spaceBetween:e}),min:0,max:50}),(0,u.jsx)(i.ToggleControl,{label:(0,l.__)("Show Dots (Pagination)","nasio-blocks"),checked:y,onChange:()=>t({showDots:!y})}),(0,u.jsx)(i.ToggleControl,{label:(0,l.__)("Show Arrows (Navigation)","nasio-blocks"),checked:j,onChange:()=>t({showArrows:!j})}),(0,u.jsx)(i.ToggleControl,{label:(0,l.__)("Drag Slides","nasio-blocks"),checked:S,onChange:()=>t({draggable:!S})}),(0,u.jsx)(i.ToggleControl,{label:(0,l.__)("Loop Slider","nasio-blocks"),checked:v,onChange:()=>t({loop:!v})}),(0,u.jsx)(i.ToggleControl,{label:(0,l.__)("Autoplay","nasio-blocks"),checked:k,onChange:()=>t({autoplay:!k})}),k&&(0,u.jsx)(i.RangeControl,{label:(0,l.__)("Autoplay Delay (ms)","nasio-blocks"),value:x,onChange:e=>t({autoplayDelay:e}),min:1e3,max:1e4,step:500}),(0,u.jsx)(i.ToggleControl,{label:(0,l.__)("Show Captions","nasio-blocks"),checked:f,onChange:()=>t({showCaptions:!f})}),(0,u.jsx)(i.SelectControl,{label:(0,l.__)("Link To","nasio-blocks"),value:_,options:[{value:"none",label:(0,l.__)("None","nasio-blocks")},{value:"media",label:(0,l.__)("Media File","nasio-blocks")},{value:"attachment",label:(0,l.__)("Attachment Page","nasio-blocks")}],onChange:e=>t({linkTo:e})}),(0,u.jsx)(i.SelectControl,{label:(0,l.__)("Image Size","nasio-blocks"),value:C,options:M,onChange:e=>t({imageSizeSlug:e})})]})}),(0,u.jsx)("div",{...O,children:(0,u.jsxs)("div",{className:"gallery-slider-wrapper",ref:V,children:[(0,u.jsx)("div",{className:"nasio-slider-editor-title",children:(0,l.__)("Gallery Slider Preview","nasio-blocks")}),(0,u.jsxs)("div",{className:"nasio-gallery-slider swiper",children:[(0,u.jsx)("div",{className:"swiper-wrapper",children:w.map((e=>{const l=N===e.id,a=T===e.id;return(0,u.jsx)("div",{className:"swiper-slide gallery-slider-item "+(l?"is-selected":""),onClick:()=>P(e.id),children:(0,u.jsxs)("figure",{className:"gallery-slider-figure",children:[(0,u.jsx)("img",{src:e.url,alt:e.alt,"data-id":e.id,"data-link":e.link,className:"gallery-slider-image"}),f&&(e.caption||a)&&(0,u.jsx)("figcaption",{className:"gallery-slider-caption",children:a?(0,u.jsx)("textarea",{value:e.caption,onChange:l=>((e,l)=>{const a=w.map((a=>a.id===l?{...a,caption:e}:a));t({images:a})})(l.target.value,e.id),autoFocus:!0,onClick:e=>e.stopPropagation()}):e.caption})]})},e.id)}))}),y&&(0,u.jsx)("div",{className:"swiper-pagination"}),j&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"swiper-button-prev"}),(0,u.jsx)("div",{className:"swiper-button-next"})]})]})]})})]})},save:function({attributes:e}){const{images:l,slidesPerView:i,spaceBetween:s,loop:o,autoplay:n,autoplayDelay:t,showDots:r,showArrows:c,draggable:d,showCaptions:p,linkTo:g}=e;if(!l.length)return null;const w=a.useBlockProps.save({className:"wp-block-nasio-block-gallery-slider","data-slides-per-view":i,"data-space-between":s,"data-loop":o.toString(),"data-autoplay":n.toString(),"data-autoplay-delay":t,"data-show-dots":r.toString(),"data-show-arrows":c.toString(),"data-draggable":d.toString(),"data-show-captions":p.toString(),"data-link-to":g});return(0,u.jsx)("div",{...w,children:(0,u.jsxs)("div",{className:"nasio-gallery-slider swiper",children:[(0,u.jsx)("div",{className:"swiper-wrapper",children:l.map((e=>{let l=(0,u.jsx)("img",{src:e.url,alt:e.alt,"data-id":e.id,"data-link":e.link,className:"gallery-slider-image"});if("none"!==g){const a="media"===g?e.url:e.link;l=(0,u.jsx)("a",{href:a,rel:"noreferrer noopener",children:l})}return(0,u.jsx)("div",{className:"swiper-slide gallery-slider-item",children:(0,u.jsxs)("figure",{className:"gallery-slider-figure",children:[l,p&&e.caption&&(0,u.jsx)("figcaption",{className:"gallery-slider-caption",children:e.caption})]})},e.id)}))}),r&&(0,u.jsx)("div",{className:"swiper-pagination"}),c&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"swiper-button-prev"}),(0,u.jsx)("div",{className:"swiper-button-next"})]})]})})}})}},a={};function i(e){var s=a[e];if(void 0!==s)return s.exports;var o=a[e]={exports:{}};return l[e](o,o.exports,i),o.exports}i.m=l,e=[],i.O=(l,a,s,o)=>{if(!a){var n=1/0;for(d=0;d<e.length;d++){for(var[a,s,o]=e[d],t=!0,r=0;r<a.length;r++)(!1&o||n>=o)&&Object.keys(i.O).every((e=>i.O[e](a[r])))?a.splice(r--,1):(t=!1,o<n&&(n=o));if(t){e.splice(d--,1);var c=s();void 0!==c&&(l=c)}}return l}o=o||0;for(var d=e.length;d>0&&e[d-1][2]>o;d--)e[d]=e[d-1];e[d]=[a,s,o]},i.o=(e,l)=>Object.prototype.hasOwnProperty.call(e,l),(()=>{var e={606:0,962:0};i.O.j=l=>0===e[l];var l=(l,a)=>{var s,o,[n,t,r]=a,c=0;if(n.some((l=>0!==e[l]))){for(s in t)i.o(t,s)&&(i.m[s]=t[s]);if(r)var d=r(i)}for(l&&l(a);c<n.length;c++)o=n[c],i.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return i.O(d)},a=globalThis.webpackChunkgallery_slider=globalThis.webpackChunkgallery_slider||[];a.forEach(l.bind(null,0)),a.push=l.bind(null,a.push.bind(a))})();var s=i.O(void 0,[962],(()=>i(909)));s=i.O(s)})();