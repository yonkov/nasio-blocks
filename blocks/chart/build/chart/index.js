(()=>{"use strict";var a,e={708:()=>{const a=window.wp.blocks,e=window.wp.i18n,t=window.wp.blockEditor,l=window.wp.components,o=window.wp.element,s=window.ReactJSXRuntime,n=JSON.parse('{"UU":"nasio-block/chart"}');(0,a.registerBlockType)(n.UU,{edit:function({attributes:a,setAttributes:n,clientId:r,className:i}){const{chartType:c,chartData:h,chartDatasets:d,chartColors:b,chartTitle:u,showLegend:p,legendPosition:g,chartWidth:_,chartHeight:v,backgroundColor:m,borderColor:C,borderWidth:k,showDataLabels:x,dataUnit:f,unitPosition:w,labelThreshold:j}=a,y=(0,o.useRef)(null),D=(0,o.useRef)(null),[N,$]=(0,o.useState)(!1);(0,o.useEffect)(()=>{function a(){if(y.current){const a=y.current.parentElement;a&&(window.innerWidth>=640?(a.style.width=`${_}px`,a.style.height=`${v}px`):(a.style.width="",a.style.height=""))}}function e(a,e){let t;return function(...l){clearTimeout(t),t=setTimeout(()=>{clearTimeout(t),a(...l)},e)}}return window.addEventListener("resize",e(a,150)),()=>{window.removeEventListener("resize",e(a,150))}},[_,v]),(0,o.useEffect)(()=>{void 0!==window.Chart?$(!0):console.error("Chart.js not available. Make sure the chart block is enabled in plugin settings.")},[]),(0,o.useEffect)(()=>{if(!N||!y.current)return;D.current&&D.current.destroy();const a={type:"doughnut"===c?"doughnut":c,data:{labels:h.map(a=>a.label),datasets:[]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{title:{display:!!u,text:u},legend:{display:p,position:g}}}};f&&(a.options.plugins||(a.options.plugins={}),a.options.plugins.tooltip={enabled:!0,callbacks:{label:function(a){let e="";const t=f||"",l="pie"===c||"doughnut"===c?a.parsed:a.parsed.y;return"pie"===c||"doughnut"===c?e="before"===w?t+l:l+t:(a.dataset.label&&(e=a.dataset.label+": "),e+="before"===w?t+l:l+t),e}}}),"line"===c||"bar"===c?(a.data.datasets=d.map((a,e)=>{const t=b[e]||"#36A2EB";return{label:a.label||`Dataset ${e+1}`,data:a.data||h.map(()=>0),backgroundColor:"bar"===c?(()=>{const a=t.replace("#","");return`rgba(${parseInt(a.substr(0,2),16)}, ${parseInt(a.substr(2,2),16)}, ${parseInt(a.substr(4,2),16)}, 0.6)`})():(()=>{const a=t.replace("#","");return`rgba(${parseInt(a.substr(0,2),16)}, ${parseInt(a.substr(2,2),16)}, ${parseInt(a.substr(4,2),16)}, 0.6)`})(),borderColor:t}}),a.options.scales={y:{beginAtZero:!0}}):(a.data.datasets=[{label:u||"Dataset",data:h.map(a=>a.value),backgroundColor:b.slice(0,h.length),borderColor:b.slice(0,h.length)}],a.plugins=x?[{afterDatasetsDraw:function(a){const e=a.ctx;e.textAlign="center",e.textBaseline="middle",e.font="regular 11px Arial",e.fillStyle="#fff";const t=a.data.datasets[0];a.getDatasetMeta(0).data.forEach((a,l)=>{if(!a.circumference||0===a.circumference)return;const o=t.data[l];if(o<(void 0!==j?j:0))return;const s=f||"",n="before"===w?s+o:o+s,r=a.tooltipPosition();e.fillText(n,r.x,r.y)})}}]:[]);try{D.current=new window.Chart(y.current,a);const e=y.current.parentElement;e&&(window.innerWidth>=640?(e.style.width=`${_}px`,e.style.height=`${v}px`):(e.style.width="",e.style.height=""))}catch(a){console.error("Error creating chart:",a)}return()=>{D.current&&D.current.destroy()}},[N,c,h,d,b,u,p,g,_,v,m,C,k,x,f,w,j]);const B=(0,t.useBlockProps)({className:`wp-block-nasio-block-chart chart-type-${c} ${i||""}`});function I(){const a={label:`Item ${h.length+1}`,value:10},e=[...h,a];if(n({chartData:e}),"pie"===c||"doughnut"===c){const a=["#36A2EB","#DC3545","#FFCE56","#4BC0C0","#FF6384","#9966FF","#FF9F40","#FF6B6B","#4ECDC4","#45B7D1"],e=a[h.length%a.length];n({chartColors:[...b,e]})}if(("bar"===c||"line"===c)&&d.length>0){const a=d.map(a=>({...a,data:[...a.data||[],0]}));n({chartDatasets:a})}}function T(a){if(h.length>1){const e=h.filter((e,t)=>t!==a);if(n({chartData:e}),"pie"===c||"doughnut"===c){const e=b.filter((e,t)=>t!==a);n({chartColors:e})}if(("bar"===c||"line"===c)&&d.length>0){const e=d.map(e=>({...e,data:(e.data||[]).filter((e,t)=>t!==a)}));n({chartDatasets:e})}}}function L(a,e,t){const l=[...h];l[a]={...l[a],[e]:"value"===e?parseFloat(t)||0:t},n({chartData:l})}function P(a,e){const t=[...b];t[a]=e,n({chartColors:t})}return(0,s.jsxs)("div",{...B,children:[(0,s.jsxs)(t.InspectorControls,{children:[(0,s.jsxs)(l.PanelBody,{title:(0,e.__)("Chart Settings","nasio-blocks"),children:[(0,s.jsx)(l.SelectControl,{label:(0,e.__)("Chart Type","nasio-blocks"),value:c,options:[{label:(0,e.__)("Pie Chart","nasio-blocks"),value:"pie"},{label:(0,e.__)("Doughnut Chart","nasio-blocks"),value:"doughnut"},{label:(0,e.__)("Bar Chart","nasio-blocks"),value:"bar"},{label:(0,e.__)("Line Chart","nasio-blocks"),value:"line"}],onChange:a=>{const e={chartType:a};"bar"===a||"line"===a?0===d.length&&(0===h.length?(e.chartData=[{label:"Item 1",value:64},{label:"Item 2",value:6},{label:"Item 3",value:3.6},{label:"Item 4",value:27.5}],e.chartDatasets=[{label:"Dataset 1",data:[64,6,3.6,27.5]}]):e.chartDatasets=[{label:"Dataset 1",data:h.map(a=>a.value)}]):"pie"!==a&&"doughnut"!==a||(0===h.length&&(e.chartData=[{label:"Item 1",value:64},{label:"Item 2",value:6},{label:"Item 3",value:3.6},{label:"Item 4",value:27.5}]),e.chartDatasets=[]),n(e)},help:(0,e.__)("Choose the type of chart to display.","nasio-blocks")}),(0,s.jsx)(l.TextControl,{label:(0,e.__)("Chart Title","nasio-blocks"),value:u,onChange:a=>n({chartTitle:a}),placeholder:(0,e.__)("Enter chart title...","nasio-blocks")}),(0,s.jsx)(l.ToggleControl,{label:(0,e.__)("Show Legend","nasio-blocks"),checked:p,onChange:()=>n({showLegend:!p})}),p&&(0,s.jsx)(l.SelectControl,{label:(0,e.__)("Legend Position","nasio-blocks"),value:g,options:[{label:(0,e.__)("Top","nasio-blocks"),value:"top"},{label:(0,e.__)("Bottom","nasio-blocks"),value:"bottom"},{label:(0,e.__)("Left","nasio-blocks"),value:"left"},{label:(0,e.__)("Right","nasio-blocks"),value:"right"}],onChange:a=>n({legendPosition:a})}),("pie"===c||"doughnut"===c)&&(0,s.jsx)(l.ToggleControl,{label:(0,e.__)("Show Labels","nasio-blocks"),checked:x,onChange:()=>n({showDataLabels:!x}),help:(0,e.__)("Display data values on the chart segments.","nasio-blocks")}),("pie"===c||"doughnut"===c)&&x&&(0,s.jsx)(l.__experimentalInputControl,{label:(0,e.__)("Label Threshold","nasio-blocks"),type:"number",value:void 0!==j?j:"",onChange:a=>{if(""===a||null==a)return void n({labelThreshold:void 0});const e=parseFloat(a);isNaN(e)||n({labelThreshold:e})},help:(0,e.__)("Hide labels for values below this threshold.","nasio-blocks"),step:"any"}),(0,s.jsx)(l.RangeControl,{label:(0,e.__)("Chart Width (px)","nasio-blocks"),value:_,onChange:a=>n({chartWidth:a}),min:200,max:800,step:10}),(0,s.jsx)(l.RangeControl,{label:(0,e.__)("Chart Height (px)","nasio-blocks"),value:v,onChange:a=>n({chartHeight:a}),min:200,max:600,step:10}),(0,s.jsx)(l.RangeControl,{label:(0,e.__)("Border Width (px)","nasio-blocks"),value:k,onChange:a=>n({borderWidth:a}),min:0,max:10,step:1}),(0,s.jsx)(l.TextControl,{label:(0,e.__)("Data Unit","nasio-blocks"),value:f,onChange:a=>n({dataUnit:a}),help:(0,e.__)("Unit or symbol to display after data values (e.g., %, $, km/h, etc.).","nasio-blocks")}),f&&(0,s.jsx)(l.SelectControl,{label:(0,e.__)("Unit Position","nasio-blocks"),value:w,options:[{label:(0,e.__)("After Value","nasio-blocks"),value:"after"},{label:(0,e.__)("Before Value","nasio-blocks"),value:"before"}],onChange:a=>n({unitPosition:a}),help:(0,e.__)("Choose whether the unit appears before or after the data value.","nasio-blocks")})]}),(0,s.jsxs)(l.PanelBody,{title:(0,e.__)("Chart Data","nasio-blocks"),initialOpen:!0,children:[("pie"===c||"doughnut"===c)&&(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:"chart-labels-section",children:[(0,s.jsx)("h4",{children:(0,e.__)("Data Items","nasio-blocks")}),h.map((a,t)=>(0,s.jsxs)("div",{className:"chart-data-item",children:[(0,s.jsx)(l.__experimentalInputControl,{label:(0,e.__)("Label","nasio-blocks"),value:a.label,onChange:a=>L(t,"label",a),className:"data-item-controls"}),(0,s.jsx)(l.__experimentalInputControl,{label:(0,e.__)("Value","nasio-blocks"),type:"number",value:a.value,onChange:a=>L(t,"value",a),className:"data-item-controls"}),h.length>1&&(0,s.jsx)(l.Button,{variant:"secondary",isDestructive:!0,onClick:()=>T(t),className:"data-item-remove",children:(0,e.__)("Remove Item","nasio-blocks")})]},t)),(0,s.jsx)(l.Button,{variant:"primary",onClick:I,className:"add-data-btn",children:(0,e.__)("Add Data Item","nasio-blocks")})]})}),("bar"===c||"line"===c)&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"chart-labels-section",children:[(0,s.jsx)("h4",{children:(0,e.__)("Labels","nasio-blocks")}),h.map((a,t)=>(0,s.jsxs)("div",{className:"label-item",children:[(0,s.jsx)(l.__experimentalInputControl,{label:`${(0,e.__)("Label","nasio-blocks")} ${t+1}`,value:a.label,onChange:a=>L(t,"label",a),className:"label-input"}),h.length>1&&(0,s.jsx)(l.Button,{variant:"secondary",isDestructive:!0,onClick:()=>T(t),className:"label-remove",children:(0,e.__)("Remove","nasio-blocks")})]},t)),(0,s.jsx)(l.Button,{variant:"secondary",onClick:I,className:"add-label-btn",children:(0,e.__)("Add Label","nasio-blocks")})]}),(0,s.jsx)("h4",{children:(0,e.__)("Datasets","nasio-blocks")}),d.map((a,t)=>(0,s.jsxs)("div",{className:"chart-dataset",children:[(0,s.jsx)(l.__experimentalInputControl,{label:(0,e.__)("Dataset Label","nasio-blocks"),value:a.label,onChange:a=>function(a,e,t){const l=[...d];l[a]={...l[a],[e]:t},n({chartDatasets:l})}(t,"label",a),className:"dataset-label"}),(0,s.jsx)("h5",{children:(0,e.__)("Values","nasio-blocks")}),(0,s.jsx)("div",{className:"dataset-values",children:h.map((e,o)=>(0,s.jsx)(l.__experimentalInputControl,{label:e.label,type:"number",value:a.data[o]||0,onChange:a=>function(a,e,t){const l=[...d],o=[...l[a].data];o[e]=t,l[a]={...l[a],data:o},n({chartDatasets:l})}(t,o,parseFloat(a)||0)},o))}),d.length>1&&(0,s.jsx)(l.Button,{variant:"secondary",isDestructive:!0,onClick:()=>function(a){if(d.length>1){const e=d.filter((e,t)=>t!==a);n({chartDatasets:e})}}(t),className:"dataset-remove",children:(0,e.__)("Remove Dataset","nasio-blocks")})]},t)),(0,s.jsx)(l.Button,{variant:"secondary",onClick:function(){const a={label:`Dataset ${d.length+1}`,data:h.map(()=>0)};n({chartDatasets:[...d,a]})},className:"add-dataset-btn",children:(0,e.__)("Add Dataset","nasio-blocks")})]})]})]}),(0,s.jsxs)(t.InspectorControls,{group:"styles",children:[("pie"===c||"doughnut"===c)&&(0,s.jsx)(t.PanelColorSettings,{title:(0,e.__)("Chart Colors","nasio-blocks"),colorSettings:h.map((a,t)=>({value:b[t]||"#000000",onChange:a=>P(t,a||"#000000"),label:`${a.label} ${(0,e.__)("Color","nasio-blocks")}`,disableCustomColors:!1,clearable:!1}))}),("bar"===c||"line"===c)&&(0,s.jsx)(t.PanelColorSettings,{title:(0,e.__)("Dataset Colors","nasio-blocks"),colorSettings:d.map((a,t)=>({value:b[t]||"#36A2EB",onChange:a=>P(t,a||"#36A2EB"),label:`${a.label} ${(0,e.__)("Color","nasio-blocks")}`,disableCustomColors:!1,clearable:!1}))}),(0,s.jsx)(t.PanelColorSettings,{title:(0,e.__)("Background & Border","nasio-blocks"),colorSettings:[{value:m,onChange:a=>n({backgroundColor:a}),label:(0,e.__)("Background Color","nasio-blocks"),disableCustomColors:!1,clearable:!0},{value:C,onChange:a=>n({borderColor:a}),label:(0,e.__)("Border Color","nasio-blocks"),disableCustomColors:!1,clearable:!0}]})]}),(0,s.jsxs)("div",{className:"chart-editor-wrapper",children:[(0,s.jsx)("h3",{className:"chart-editor-title",children:(0,e.__)("Chart Preview","nasio-blocks")}),(0,s.jsx)("div",{className:"chart-container",style:{backgroundColor:m||void 0,border:C?`${k}px solid ${C}`:void 0},children:N?(0,s.jsx)("canvas",{ref:y}):(0,s.jsx)("div",{className:"chart-loading",children:(0,e.__)("Loading Chart.js...","nasio-blocks")})})]})]})},save:function({attributes:a}){const{chartType:e,chartData:l,chartDatasets:o,chartColors:n,chartTitle:r,showLegend:i,legendPosition:c,chartWidth:h,chartHeight:d,backgroundColor:b,borderColor:u,borderWidth:p,showDataLabels:g,dataUnit:_,unitPosition:v,labelThreshold:m}=a,C=t.useBlockProps.save({className:`wp-block-nasio-block-chart chart-type-${e}`,"data-chart-type":e,"data-chart-data":JSON.stringify(l),"data-chart-datasets":JSON.stringify(o||[]),"data-chart-colors":JSON.stringify(n),"data-chart-title":r,"data-show-legend":i,"data-legend-position":c,"data-chart-width":h,"data-chart-height":d,"data-background-color":b||"","data-border-color":u||"","data-border-width":p,"data-show-data-labels":g,"data-data-unit":_||"","data-unit-position":v||"after","data-label-threshold":void 0!==m?m:""});return(0,s.jsx)("div",{...C,children:(0,s.jsx)("div",{className:"chart-container",style:{width:`${h}px`,height:`${d}px`,margin:"0 auto",position:"relative",...b&&{backgroundColor:b},...u&&{border:`${p}px solid ${u}`}},children:(0,s.jsx)("canvas",{className:"nasio-chart-canvas"})})})}})}},t={};function l(a){var o=t[a];if(void 0!==o)return o.exports;var s=t[a]={exports:{}};return e[a](s,s.exports,l),s.exports}l.m=e,a=[],l.O=(e,t,o,s)=>{if(!t){var n=1/0;for(h=0;h<a.length;h++){for(var[t,o,s]=a[h],r=!0,i=0;i<t.length;i++)(!1&s||n>=s)&&Object.keys(l.O).every(a=>l.O[a](t[i]))?t.splice(i--,1):(r=!1,s<n&&(n=s));if(r){a.splice(h--,1);var c=o();void 0!==c&&(e=c)}}return e}s=s||0;for(var h=a.length;h>0&&a[h-1][2]>s;h--)a[h]=a[h-1];a[h]=[t,o,s]},l.o=(a,e)=>Object.prototype.hasOwnProperty.call(a,e),(()=>{var a={176:0,992:0};l.O.j=e=>0===a[e];var e=(e,t)=>{var o,s,[n,r,i]=t,c=0;if(n.some(e=>0!==a[e])){for(o in r)l.o(r,o)&&(l.m[o]=r[o]);if(i)var h=i(l)}for(e&&e(t);c<n.length;c++)s=n[c],l.o(a,s)&&a[s]&&a[s][0](),a[s]=0;return l.O(h)},t=globalThis.webpackChunkchart=globalThis.webpackChunkchart||[];t.forEach(e.bind(null,0)),t.push=e.bind(null,t.push.bind(t))})();var o=l.O(void 0,[992],()=>l(708));o=l.O(o)})();