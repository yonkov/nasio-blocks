(()=>{function t(t){const e=t.querySelector(".nasio-chart-canvas");if(!e)return;const a=t.dataset.chartType||"pie",r=JSON.parse(t.dataset.chartData||"[]"),s=JSON.parse(t.dataset.chartDatasets||"[]"),n=JSON.parse(t.dataset.chartColors||"[]"),o=t.dataset.chartTitle||"",l="true"===t.dataset.showLegend,i=t.dataset.legendPosition||"top",d=parseInt(t.dataset.chartWidth)||440,c=parseInt(t.dataset.chartHeight)||330,u=t.dataset.backgroundColor||"",p=t.dataset.borderColor||"",h=parseInt(t.dataset.borderWidth)||1,b="true"===t.dataset.showDataLabels,g=t.dataset.dataUnit||"",f=t.dataset.unitPosition||"after",y=""===t.dataset.labelThreshold||isNaN(parseFloat(t.dataset.labelThreshold))?0:parseFloat(t.dataset.labelThreshold),w=e.parentElement;w&&(window.innerWidth>=640?(w.style.width=`${d}px`,w.style.height=`${c}px`):(w.style.width="",w.style.height=""),u&&!w.style.backgroundColor&&(w.style.backgroundColor=u),p&&!w.style.border&&(w.style.border=`${h}px solid ${p}`));const $={type:"doughnut"===a?"doughnut":a,data:{labels:r.map(t=>t.label),datasets:[]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{title:{display:!!o,text:o},legend:{display:l,position:i}}}};if(g&&($.options.plugins||($.options.plugins={}),$.options.plugins.tooltip={enabled:!0,callbacks:{label:function(t){let e="";const r=g||"",s="pie"===a||"doughnut"===a?t.parsed:t.parsed.y;return"pie"===a||"doughnut"===a?e="before"===f?r+s:s+r:(t.dataset.label&&(e=t.dataset.label+": "),e+="before"===f?r+s:s+r),e}}}),0!==r.length||0!==s.length){if("line"===a||"bar"===a){if(s.length>0)$.data.datasets=s.map((t,e)=>{const s=n[e]||"#36A2EB";return{label:t.label||`Dataset ${e+1}`,data:t.data||r.map(()=>0),backgroundColor:"bar"===a?(()=>{const t=s.replace("#","");return`rgba(${parseInt(t.substr(0,2),16)}, ${parseInt(t.substr(2,2),16)}, ${parseInt(t.substr(4,2),16)}, 0.6)`})():(()=>{const t=s.replace("#","");return`rgba(${parseInt(t.substr(0,2),16)}, ${parseInt(t.substr(2,2),16)}, ${parseInt(t.substr(4,2),16)}, 0.6)`})(),borderColor:s}});else{const t=n[0]||"#36A2EB";$.data.datasets=[{label:o||"Dataset",data:r.map(t=>t.value),backgroundColor:"bar"===a?(()=>{const e=t.replace("#","");return`rgba(${parseInt(e.substr(0,2),16)}, ${parseInt(e.substr(2,2),16)}, ${parseInt(e.substr(4,2),16)}, 0.6)`})():(()=>{const e=t.replace("#","");return`rgba(${parseInt(e.substr(0,2),16)}, ${parseInt(e.substr(2,2),16)}, ${parseInt(e.substr(4,2),16)}, 0.6)`})(),borderColor:t}]}$.options.scales={y:{beginAtZero:"bar"===a,ticks:{callback:function(t){const e=g||"";return"before"===f?e+t:t+e}}}}}else $.data.datasets=[{label:o||"Dataset",data:r.map(t=>t.value),backgroundColor:n.slice(0,r.length),borderColor:n.slice(0,r.length)}],$.plugins=b?[{afterDatasetsDraw:function(t){const e=t.ctx;e.textAlign="center",e.textBaseline="middle",e.font="regular 11px Arial",e.fillStyle="#fff";const a=t.data.datasets[0];t.getDatasetMeta(0).data.forEach((t,r)=>{if(!t.circumference||0===t.circumference)return;const s=a.data[r];if(s<y)return;const n=g||"",o="before"===f?n+s:s+n,l=t.tooltipPosition();e.fillText(o,l.x,l.y)})}}]:[];try{new window.Chart(e,$)}catch(t){console.error("Error creating chart:",t)}}else{$.data.labels=[],$.data.datasets=[];try{new window.Chart(e,$)}catch(t){console.error("Error creating chart:",t)}}}function e(){document.querySelectorAll(".wp-block-nasio-block-chart").forEach(t=>{const e=t.querySelector(".nasio-chart-canvas");if(!e)return;const a=e.parentElement;if(!a)return;const r=parseInt(t.dataset.chartWidth)||400,s=parseInt(t.dataset.chartHeight)||300;window.innerWidth>=640?(a.style.width=`${r}px`,a.style.height=`${s}px`):(a.style.width="",a.style.height="")})}document.addEventListener("DOMContentLoaded",function(){!function(){const e=document.querySelectorAll(".wp-block-nasio-block-chart");e.length&&(void 0!==window.Chart?e.forEach(t):console.error("Chart.js library not loaded"))}(),window.addEventListener("resize",function(t){let e;return function(...a){clearTimeout(e),e=setTimeout(()=>{clearTimeout(e),t(...a)},150)}}(e))})})();